---
// Avatar Test Component - untuk testing berbagai API avatar
import Avatar from '@components/ui/Avatar.astro';

const testUsers = [
  { name: 'Ahmad Rizki', email: 'ahmad.rizki@github.com' },
  { name: 'Sarah Wijaya', email: 'sarah.wijaya@github.com' },
  { name: 'Budi Santoso', email: 'budi.santoso@github.com' },
  { name: 'Tim KonXC', email: 'tim.konxc@github.com' }
];
---

<div class="avatar-test-page">
  <div class="container mx-auto py-12">
    <h1 class="text-3xl font-bold mb-8 text-center">Avatar API Test</h1>
    
    <!-- Placeholder Test (Most Reliable) -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Placeholder (Most Reliable)</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {testUsers.map(user => (
          <div class="text-center">
            <Avatar 
              name={user.name}
              email={user.email}
              size={100}
              fallbackType="placeholder"
              backgroundColor="0D8ABC"
              textColor="FFFFFF"
            />
            <p class="mt-2 text-sm font-medium">{user.name}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Lorem Picsum Test -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Lorem Picsum (Random Images)</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {testUsers.map(user => (
          <div class="text-center">
            <Avatar 
              name={user.name}
              email={user.email}
              size={100}
              fallbackType="picsum"
            />
            <p class="mt-2 text-sm font-medium">{user.name}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Boring Avatars Test -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Boring Avatars (Geometric)</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {testUsers.map(user => (
          <div class="text-center">
            <Avatar 
              name={user.name}
              email={user.email}
              size={100}
              fallbackType="boring-avatars"
            />
            <p class="mt-2 text-sm font-medium">{user.name}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- DiceBear Test -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">DiceBear Avatars</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {testUsers.map(user => (
          <div class="text-center">
            <Avatar 
              name={user.name}
              email={user.email}
              size={100}
              fallbackType="dicebear"
            />
            <p class="mt-2 text-sm font-medium">{user.name}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Robohash Test -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Robohash</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {testUsers.map(user => (
          <div class="text-center">
            <Avatar 
              name={user.name}
              email={user.email}
              size={100}
              fallbackType="robohash"
            />
            <p class="mt-2 text-sm font-medium">{user.name}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Custom Background Test -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Custom Backgrounds</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        {testUsers.map((user, index) => (
          <div class="text-center">
            <Avatar 
              name={user.name}
              email={user.email}
              size={100}
              fallbackType="ui-avatars"
              backgroundColor={['0D8ABC', 'FF6B6B', '4ECDC4', '45B7D1'][index]}
              textColor="fff"
            />
            <p class="mt-2 text-sm font-medium">{user.name}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- Size Variations Test -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Size Variations</h2>
      <div class="flex items-center gap-6 justify-center">
        <div class="text-center">
          <Avatar 
            name="Ahmad Rizki"
            size={32}
            fallbackType="ui-avatars"
            backgroundColor="0D8ABC"
          />
          <p class="mt-2 text-xs">32px</p>
        </div>
        <div class="text-center">
          <Avatar 
            name="Ahmad Rizki"
            size={64}
            fallbackType="ui-avatars"
            backgroundColor="0D8ABC"
          />
          <p class="mt-2 text-xs">64px</p>
        </div>
        <div class="text-center">
          <Avatar 
            name="Ahmad Rizki"
            size={100}
            fallbackType="ui-avatars"
            backgroundColor="0D8ABC"
          />
          <p class="mt-2 text-xs">100px</p>
        </div>
        <div class="text-center">
          <Avatar 
            name="Ahmad Rizki"
            size={150}
            fallbackType="ui-avatars"
            backgroundColor="0D8ABC"
          />
          <p class="mt-2 text-xs">150px</p>
        </div>
      </div>
    </section>

    <!-- API URLs -->
    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6">Generated API URLs (200 OK Status)</h2>
      <div class="bg-neutral-100 p-6 rounded-lg">
        <h3 class="font-semibold mb-3">Placeholder URLs (Most Reliable):</h3>
        <ul class="space-y-2 text-sm font-mono">
          {testUsers.map(user => (
            <li>
              <code>https://via.placeholder.com/100x100/0D8ABC/FFFFFF?text={user.name.charAt(0)}</code>
            </li>
          ))}
        </ul>
        
        <h3 class="font-semibold mb-3 mt-6">Lorem Picsum URLs:</h3>
        <ul class="space-y-2 text-sm font-mono">
          {testUsers.map(user => {
            const seed = user.name.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
            return (
              <li>
                <code>https://picsum.photos/seed/{seed}/100/100</code>
              </li>
            );
          })}
        </ul>
        
        <h3 class="font-semibold mb-3 mt-6">Boring Avatars URLs:</h3>
        <ul class="space-y-2 text-sm font-mono">
          {testUsers.map(user => (
            <li>
              <code>https://source.boringavatars.com/marble/100/{encodeURIComponent(user.name)}?colors=0D8ABC,FF6B6B,4ECDC4,45B7D1,96CEB4</code>
            </li>
          ))}
        </ul>
        
        <h3 class="font-semibold mb-3 mt-6">UI Avatars URLs:</h3>
        <ul class="space-y-2 text-sm font-mono">
          {testUsers.map(user => (
            <li>
              <code>https://ui-avatars.com/api/?name={encodeURIComponent(user.name)}&size=100&background=random&color=fff&format=png</code>
            </li>
          ))}
        </ul>
      </div>
    </section>
  </div>
</div>

<style>
  @reference "@/styles/global.css";
  
  .avatar-test-page {
    @apply bg-white min-h-screen;
  }
  
  code {
    @apply bg-neutral-200 px-2 py-1 rounded text-xs;
  }
</style>
